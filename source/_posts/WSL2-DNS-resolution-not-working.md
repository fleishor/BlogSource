---
title: WSL2 - DNS resolution not working
date: 2020-10-27 18:57:05
tags: 
- WSL2
categories: 
- Windows 
- WSL2
---

# WSL2 - DNS resolution not working

## Reason

Reason is a wrong `nameserver` entry in /etc/resolv.conf

~~~
/etc$ more /etc/resolv.conf
# This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /etc/wsl.conf:
# [network]
# generateResolvConf = false
nameserver 172.25.144.1
/etc$
~~~

## Solution

Found at https://gist.github.com/coltenkrauter/608cfe02319ce60facd76373249b8ca6

\# | WSL                                                          | Comments
---|--------------------------------------------------------------|-------------
  1 | `cd ~/../../etc`                                            | Goto `/etc` folder in WSL
  2 | `echo "[network]" \| sudo tee wsl.conf`                     | Create wsl.conf so resolv.conf will not be generated/overwritten any more
  3 | `echo "generateResolvConf = false" \| sudo tee -a wsl.conf` |
  4 | `wsl --shutdown`                                            | CMD: Shutdown 
  5 | `wsl`                                                       | CMD: start WSL again
  6 | `cd ~/../../etc`                                            | 
  7 | `sudo rm resolv.conf`                                       | Delete sym. link resolv.conf
  8 | `echo "nameserver 8.8.8.8" \| sudo tee resolv.conf`         | Add nameserver to resolv.conf
  9 | `wsl --shutdown`                                            | CMD: Shutdown
 10 | `wsl`                                                       | CMD: and start WSL again


